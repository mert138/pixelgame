<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Oyun Haritası</title>
  <style>
    body {
      margin: 0;
      background: #111;
      overflow: hidden;
    }
    canvas {
      width: 100vw;   
      height: 100vh;  
      image-rendering: pixelated; 
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const mapImg = new Image();
    mapImg.src = "pixilart-drawing.png";

    const characterImg = new Image();
    characterImg.src = "karakter.png";

    let char = {
      x: 100,
      y: canvas.height - 150,
      width: 50,
      height: 50,
      dx: 0,
      dy: 0,
      speed: 5,
      jumpPower: 15,
      onGround: false
    };

    const gravity = 0.8;

    // Platformlar (çim, kale bloğu)
    const platforms = [
      {x:0, y:canvas.height - 100, width: canvas.width, height: 100}, // çim
      {x:0, y:canvas.height - 330, width: 500, height: 20}, // kale platform
    ];

    // Merdivenlar
    const ladders = [
      {x:55, y:canvas.height - 330, width: 50, height: 200}, // kale merdiveni
    ];

    const keys = {
      ArrowLeft: false,
      ArrowRight: false,
      ArrowUp: false
    };

    document.addEventListener('keydown', e => {
      if(keys.hasOwnProperty(e.key)) keys[e.key] = true;
    });

    document.addEventListener('keyup', e => {
      if(keys.hasOwnProperty(e.key)) keys[e.key] = false;
    });

    function update() {
      char.dx = 0;

      // yatay hareket
      if(keys.ArrowLeft) char.dx = -char.speed;
      if(keys.ArrowRight) char.dx = char.speed;

      // merdivende yukarı çıkma
      let onLadder = false;
      ladders.forEach(l => {
        if(char.x + char.width > l.x &&
           char.x < l.x + l.width &&
           char.y + char.height > l.y &&
           char.y < l.y + l.height) {
          onLadder = true;
        }
      });

      if(onLadder && keys.ArrowUp) {
        char.dy = -char.speed; // yukarı çık
      } else {
        // zıplama
        if(keys.ArrowUp && char.onGround) {
          char.dy = -char.jumpPower;
          char.onGround = false;
        }
        // yerçekimi
        char.dy += gravity;
      }

      // yeni konum
      char.x += char.dx;
      char.y += char.dy;

      // platform çarpışmaları
      char.onGround = false;
      platforms.forEach(p => {
        if(char.x + char.width > p.x &&
           char.x < p.x + p.width &&
           char.y + char.height > p.y &&
           char.y + char.height < p.y + p.height + char.dy) {
          char.y = p.y - char.height;
          char.dy = 0;
          char.onGround = true;
        }
      });

      // ekran kenarlarına sınır
      if(char.x < 0) char.x = 0;
      if(char.x + char.width > canvas.width) char.x = canvas.width - char.width;
      if(char.y < 0) char.y = 0;
      if(char.y + char.height > canvas.height) char.y = canvas.height - char.height;

      draw();
      requestAnimationFrame(update);
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.imageSmoothingEnabled = false;
      ctx.drawImage(mapImg, 0, 0, mapImg.width, mapImg.height, 0, 0, canvas.width, canvas.height);

      ctx.drawImage(characterImg, char.x, char.y, char.width, char.height);

      // Platformları ve merdivenleri kontrol için isteğe bağlı görebilirsin
      // ctx.fillStyle = 'rgba(0,255,0,0.3)';
      // platforms.forEach(p => ctx.fillRect(p.x, p.y, p.width, p.height));
      // ctx.fillStyle = 'rgba(255,0,0,0.3)';
      // ladders.forEach(l => ctx.fillRect(l.x, l.y, l.width, l.height));
    }

    mapImg.onload = () => {
      characterImg.onload = () => {
        update();
      };
    };
  </script>
</body>
</html>






